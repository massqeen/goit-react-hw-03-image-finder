{"version":3,"sources":["components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.js","components/Container/Container.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","api/images-api.js","components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/Spinner.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Button","onLoadMore","id","type","className","styles","button","onClick","Container","children","ImageGalleryItem","urlPreview","urlFull","tags","openModal","onSetImgData","item","src","alt","image","ImageGallery","images","gallery","map","img","i","webformatURL","largeImageURL","fetchAPI","searchQuery","page","pageSize","fetch","then","res","json","hits","totalHits","length","Error","propTypes","PropTypes","string","isRequired","number","modalRoot","document","querySelector","Modal","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","e","code","createPortal","backdrop","currentTarget","target","content","Searchbar","onSubmit","useState","query","setQuery","bar","form","preventDefault","trim","toast","error","position","label","input","autoComplete","autoFocus","placeholder","value","onChange","override","css","Spinner","loading","size","color","Status","App","galleryImages","setImages","totalImages","setTotalImages","setSearchQuery","setPage","largeImageUrl","setLargeImageUrl","modalImgTags","setModalImgTags","setError","showModal","setShowModal","status","setStatus","fetchImages","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","err","handleSearchFormSubmit","setModalImgData","toggleModal","message","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.af5c7a52.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__BJ07M\",\"image\":\"ImageGalleryItem_image__K1pr6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__22F3F\",\"content\":\"Modal_content__3sqph\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__YskiH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__1eVQL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__22JmB\"};","import PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nconst Button = ({ onLoadMore }) => (\n  <button\n    id=\"loadMore\"\n    type=\"button\"\n    className={styles.button}\n    onClick={() => onLoadMore()}\n  >\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import PropTypes from 'prop-types';\nimport styles from './Container.module.css';\n\nconst Container = ({ children }) => (\n  <div className={styles.Container}>{children}</div>\n);\nContainer.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n};\nexport default Container;\n","import PropTypes from 'prop-types';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({\r\n  urlPreview = 'http://placehold.it/600x400',\r\n  urlFull = 'http://placehold.it/600x400',\r\n  tags = '',\r\n  openModal,\r\n  onSetImgData,\r\n}) => {\r\n  return (\r\n    <li className={styles.item}>\r\n      <img\r\n        src={urlPreview}\r\n        alt={tags}\r\n        className={styles.image}\r\n        onClick={() => {\r\n          onSetImgData({ urlFull, tags });\r\n          openModal();\r\n        }}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  urlPreview: PropTypes.string.isRequired,\r\n  urlFull: PropTypes.string.isRequired,\r\n  tags: PropTypes.string,\r\n  openModal: PropTypes.func.isRequired,\r\n  onSetImgData: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from 'prop-types';\r\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ images, openModal, onSetImgData }) => {\r\n  return (\r\n    <ul className={styles.gallery}>\r\n      {images.map((img, i) => (\r\n        <ImageGalleryItem\r\n          key={i}\r\n          urlPreview={img.webformatURL}\r\n          urlFull={img.largeImageURL}\r\n          tags={img.tags}\r\n          openModal={openModal}\r\n          onSetImgData={onSetImgData}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  openModal: PropTypes.func.isRequired,\r\n  onSetImgData: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import PropTypes from 'prop-types';\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '18257903-4453e2975e3dd917fd04b41f9';\n\nconst fetchAPI = ({ searchQuery, page = 1, pageSize = 12 }) => {\n  return fetch(\n    `${URL}?key=${API_KEY}&q=${searchQuery}&per_page=${pageSize}&page=${page}\n      &image_type=photo&orientation=horizontal`\n  )\n    .then((res) => res.json())\n    .then(({ hits: images, totalHits }) => {\n      if (!images.length) {\n        throw new Error('unfortunately, your request not found.');\n      }\n      return { totalHits, images };\n    });\n};\n\nfetchAPI.propTypes = {\n  searchQuery: PropTypes.string.isRequired,\n  page: PropTypes.number.isRequired,\n  pageSize: PropTypes.number.isRequired,\n};\n\nexport default fetchAPI;\n","import { useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nconst Modal = ({ onClose, children }) => {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  });\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={styles.backdrop} onClick={handleBackdropClick}>\r\n      <div className={styles.content}>{children}</div>\r\n    </div>,\r\n    modalRoot\r\n  );\r\n};\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default Modal;\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport styles from './Searchbar.module.css';\r\n\r\nconst Searchbar = ({ onSubmit }) => {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const handleChange = (e) => setQuery(e.currentTarget.value);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (query.trim() === '') {\r\n      toast.error('Please enter your query', {\r\n        position: 'top-right',\r\n      });\r\n      return;\r\n    }\r\n    onSubmit(query);\r\n    setQuery('');\r\n  };\r\n\r\n  return (\r\n    <header className={styles.bar}>\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <button type=\"submit\" className={styles.button}>\r\n          <span className={styles.label}>Search</span>\r\n        </button>\r\n        <input\r\n          className={styles.input}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          value={query}\r\n          onChange={handleChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n};\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Searchbar;\r\n","import PropTypes from 'prop-types';\r\nimport { css } from '@emotion/core';\r\nimport PacmanLoader from 'react-spinners/PacmanLoader';\r\n\r\n// Can be a string as well. Need to ensure each key-value pair ends with ;\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  border-color: red;\r\n`;\r\n\r\nconst Spinner = ({ loading }) => (\r\n  <div className=\"sweet-loading\">\r\n    <PacmanLoader\r\n      css={override}\r\n      size={32}\r\n      color={'#303f9f'}\r\n      loading={loading}\r\n    />\r\n  </div>\r\n);\r\n\r\nSpinner.propTypes = {\r\n  loading: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Spinner;\r\n","import { useState, useEffect } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Button from './components/Button/Button';\nimport Container from './components/Container/Container';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport fetchAPI from './api/images-api';\nimport Modal from './components/Modal/Modal';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport Spinner from './components/Spinner';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nconst App = () => {\n  const [galleryImages, setImages] = useState([]);\n  const [totalImages, setTotalImages] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('nature');\n  const [page, setPage] = useState(1);\n  const [largeImageUrl, setLargeImageUrl] = useState(null);\n  const [modalImgTags, setModalImgTags] = useState(null);\n  const [error, setError] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [status, setStatus] = useState(Status.IDLE);\n\n  useEffect(() => fetchImages(), [searchQuery]);\n\n  const scrollToBottom = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  const fetchImages = () => {\n    setStatus(Status.PENDING);\n\n    fetchAPI({ searchQuery, page })\n      .then(({ totalHits, images }) => {\n        setImages((prevState) => [...prevState, ...images]);\n        setPage((prevState) => prevState + 1);\n        setTotalImages(totalHits);\n        setStatus(Status.RESOLVED);\n\n        if (page !== 1) {\n          scrollToBottom();\n        }\n      })\n      .catch((err) => {\n        setError(err);\n        setStatus(Status.REJECTED);\n      });\n  };\n\n  const handleSearchFormSubmit = (query) => {\n    if (query === searchQuery) {\n      return;\n    }\n    setImages([]);\n    setPage(1);\n    setError(false);\n    setSearchQuery(query);\n  };\n\n  const setModalImgData = ({ urlFull, tags }) => {\n    setLargeImageUrl(urlFull);\n    setModalImgTags(tags);\n  };\n\n  const toggleModal = () => {\n    setShowModal((prevState) => !prevState);\n  };\n\n  if (status === Status.PENDING) {\n    return (\n      <Container>\n        <Searchbar onSubmit={handleSearchFormSubmit} />\n        <ImageGallery\n          images={galleryImages}\n          openModal={toggleModal}\n          onSetImgData={setModalImgData}\n        />\n        <Spinner loading={true} />;\n      </Container>\n    );\n  }\n\n  if (status === Status.REJECTED) {\n    return (\n      <Container>\n        <Searchbar onSubmit={handleSearchFormSubmit} />\n        <p>{`Whoops, ${error.message}`}</p>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <Searchbar onSubmit={handleSearchFormSubmit} />\n\n      <ImageGallery\n        images={galleryImages}\n        openModal={toggleModal}\n        onSetImgData={setModalImgData}\n      />\n\n      {totalImages > galleryImages.length && (\n        <Button onLoadMore={fetchImages} />\n      )}\n\n      <ToastContainer autoClose={4000} />\n\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={largeImageUrl} alt={modalImgTags} />\n        </Modal>\n      )}\n    </Container>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"Searchbar_bar__hMWCH\",\"form\":\"Searchbar_form__2bDYb\",\"button\":\"Searchbar_button__3qkVQ\",\"label\":\"Searchbar_label__3G9h0\",\"input\":\"Searchbar_input__3HYIf\"};"],"sourceRoot":""}